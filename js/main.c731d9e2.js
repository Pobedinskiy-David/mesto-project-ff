/*! For license information please see main.c731d9e2.js.LICENSE.txt */
"use strict";(self.webpackChunkmesto_project_ff=self.webpackChunkmesto_project_ff||[]).push([[792],{503:()=>{var t=function(t){t.classList.add("popup_is-opened"),window.addEventListener("keydown",r)},e=function(t){t.classList.contains("popup_is-opened")&&(t.classList.remove("popup_is-opened"),window.removeEventListener("keydown",r))},r=function(t){if("Escape"===t.key){var r=document.querySelector(".popup_is-opened");r&&e(r)}};function n(){var t,e,r="function"==typeof Symbol?Symbol:{},u=r.iterator||"@@iterator",c=r.toStringTag||"@@toStringTag";function i(r,n,u,c){var i=n&&n.prototype instanceof l?n:l,s=Object.create(i.prototype);return o(s,"_invoke",function(r,n,o){var u,c,i,l=0,s=o||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,c=0,i=t,f.n=r,a}};function d(r,n){for(c=r,i=n,e=0;!p&&l&&!o&&e<s.length;e++){var o,u=s[e],d=f.p,v=u[2];r>3?(o=v===n)&&(i=u[(c=u[4])?5:(c=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=r<2&&d<u[1])?(c=0,f.v=n,f.n=u[1]):d<v&&(o=r<3||u[0]>n||n>v)&&(u[4]=r,u[5]=n,f.n=v,c=0))}if(o||r>1)return a;throw p=!0,n}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,v),c=s,i=v;(e=c<2?t:i)||!p;){u||(c?c<3?(c>1&&(f.n=-1),d(c,i)):f.n=i:f.v=i);try{if(l=2,u){if(c||(o="next"),e=u[o]){if(!(e=e.call(u,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,c<2&&(c=0)}else 1===c&&(e=u.return)&&e.call(u),c<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),c=1);u=t}else if((e=(p=f.n<0)?i:r.call(n,f))!==a)break}catch(e){u=t,c=1,i=e}finally{l=1}}return{value:e,done:p}}}(r,u,c),!0),s}var a={};function l(){}function s(){}function p(){}e=Object.getPrototypeOf;var f=[][u]?e(e([][u]())):(o(e={},u,(function(){return this})),e),d=p.prototype=l.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,c,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=p,o(d,"constructor",p),o(p,"constructor",s),s.displayName="GeneratorFunction",o(p,c,"GeneratorFunction"),o(d),o(d,c,"Generator"),o(d,u,(function(){return this})),o(d,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:i,m:v}})()}function o(t,e,r,n){var u=Object.defineProperty;try{u({},"",{})}catch(t){u=0}o=function(t,e,r,n){if(e)u?u(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r;else{function c(e,r){o(t,e,(function(t){return this._invoke(e,r,t)}))}c("next",0),c("throw",1),c("return",2)}},o(t,e,r,n)}function u(t,e,r,n,o,u,c){try{var i=t[u](c),a=i.value}catch(t){return void r(t)}i.done?e(a):Promise.resolve(a).then(n,o)}var c={authorization:"2d34b32a-2ed8-4b58-aec3-c4c80b91fa92","Content-Type":"application/json"},i=function(){var t,e=(t=n().m((function t(e){var r,o,u,i,a,l,s=arguments;return n().w((function(t){for(;;)switch(t.n){case 0:return o=(r=s.length>1&&void 0!==s[1]?s[1]:{}).method,u=void 0===o?"GET":o,i=r.data,t.n=1,fetch("".concat("https://nomoreparties.co/v1/cohort-mag-4").concat(e),{method:u,headers:c,body:i?JSON.stringify(i):void 0});case 1:if((a=t.v).ok){t.n=3;break}return t.n=2,a.text().catch((function(){return""}));case 2:throw l=t.v,new Error("API ".concat(a.status,": ").concat(l||a.statusText));case 3:return t.a(2,204===a.status?null:a.json())}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var c=t.apply(e,r);function i(t){u(c,n,o,i,a,"next",t)}function a(t){u(c,n,o,i,a,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}(),a=function(t,e){return i("/users/me",{method:"PATCH",data:{name:t,about:e}})},l=function(t){return i("/cards/likes/".concat(t),{method:"PUT"})},s=function(t){return i("/cards/likes/".concat(t),{method:"DELETE"})},p=function(t){return i("/users/me/avatar",{method:"PATCH",data:{avatar:t}})},f=document.querySelector("#card-template").content;function d(t,e,r,n,o){var u=t.name,c=t.link,i=t.likes,a=t.owner,l=t._id,s=f.querySelector(".places__item").cloneNode(!0),p=i.some((function(t){return t._id===e})),d=s.querySelector(".card__image"),v=s.querySelector(".card__like-button"),y=s.querySelector(".card__delete-button"),m=s.querySelector(".card__like-count");return m.textContent=i.length,d.src=c,d.alt=u,d.addEventListener("click",o),p&&v.classList.add("card__like-button_is-active"),v.addEventListener("click",(function(){return n(v,m,l)})),s.querySelector(".card__title").textContent=u,a._id!==e?y.remove():y.addEventListener("click",(function(){r(s,l)})),s}function v(t,e,r){(t.classList.contains("card__like-button_is-active")?s:l)(r).then((function(r){var n=r.likes;t.classList.toggle("card__like-button_is-active"),e.textContent=n.length})).catch((function(t){console.log(t)}))}function y(t,e){(function(t){return i("/cards/".concat(t),{method:"DELETE"})})(e).then((function(){t.remove()})).catch((function(t){console.log(t)}))}var m=document.querySelectorAll(".popup"),_=document.querySelector(".popup_type_edit"),b=document.querySelector(".popup_type_avatar"),h=document.querySelector(".popup_type_new-card"),S=document.querySelector(".popup_type_image"),g=S.querySelector(".popup__image"),w=S.querySelector(".popup__caption"),k=document.querySelector(".places__list");function q(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return E(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var C={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},L=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C,r=q(t.querySelectorAll(e.inputSelector)),n=t.querySelector(e.submitButtonSelector);A(n,e.inactiveButtonClass),r.forEach((function(r){return x(t,r,e)}))},j=function(t,e){var r=q(t.querySelectorAll(e.inputSelector)),n=t.querySelector(e.submitButtonSelector);P(r,n,e.inactiveButtonClass),r.forEach((function(o){return o.addEventListener("input",(function(){O(t,o,e),P(r,n,e.inactiveButtonClass)}))}))},O=function(t,e,r){e.validity.patternMismatch?e.setCustomValidity(e.dataset.errorMessage):e.setCustomValidity(""),e.validity.valid?x(t,e,r):T(t,e,r)},T=function(t,e,r){var n=t.querySelector(".".concat(e.id,"-error"));e.classList.add(r.inputErrorClass),n.textContent=e.validationMessage,n.classList.add(r.errorClass)},x=function(t,e,r){var n=t.querySelector(".".concat(e.id,"-error"));e.classList.remove(r.inputErrorClass),n.textContent="",n.classList.remove(r.errorClass)},A=function(t,e){t.disabled=!0,t.classList.add(e)},P=function(t,e,r){return function(t){return t.some((function(t){return!t.validity.valid}))}(t)?A(e,r):function(t,e){t.disabled=!1,t.classList.remove(e)}(e,r)},G=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.idle,o=void 0===n?"Сохранить":n,u=r.loading,c=void 0===u?"Сохранение...":u;e&&(e.disabled=t,e.classList.toggle("popup__button_loading",t),e.textContent=t?c:o)};function B(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,u,c,i=[],a=!0,l=!1;try{if(u=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;a=!1}else for(;!(a=(n=u.call(r)).done)&&(i.push(n.value),i.length!==e);a=!0);}catch(t){l=!0,o=t}finally{try{if(!a&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return I(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function F(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function u(r,n,o,u){var a=n&&n.prototype instanceof i?n:i,l=Object.create(a.prototype);return D(l,"_invoke",function(r,n,o){var u,i,a,l=0,s=o||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return u=e,i=0,a=t,f.n=r,c}};function d(r,n){for(i=r,a=n,e=0;!p&&l&&!o&&e<s.length;e++){var o,u=s[e],d=f.p,v=u[2];r>3?(o=v===n)&&(a=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=r<2&&d<u[1])?(i=0,f.v=n,f.n=u[1]):d<v&&(o=r<3||u[0]>n||n>v)&&(u[4]=r,u[5]=n,f.n=v,i=0))}if(o||r>1)return c;throw p=!0,n}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,v),i=s,a=v;(e=i<2?t:a)||!p;){u||(i?i<3?(i>1&&(f.n=-1),d(i,a)):f.n=a:f.v=a);try{if(l=2,u){if(i||(o="next"),e=u[o]){if(!(e=e.call(u,a)))throw TypeError("iterator result is not an object");if(!e.done)return e;a=e.value,i<2&&(i=0)}else 1===i&&(e=u.return)&&e.call(u),i<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),i=1);u=t}else if((e=(p=f.n<0)?a:r.call(n,f))!==c)break}catch(e){u=t,i=1,a=e}finally{l=1}}return{value:e,done:p}}}(r,o,u),!0),l}var c={};function i(){}function a(){}function l(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(D(e={},n,(function(){return this})),e),p=l.prototype=i.prototype=Object.create(s);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,D(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return a.prototype=l,D(p,"constructor",l),D(l,"constructor",a),a.displayName="GeneratorFunction",D(l,o,"GeneratorFunction"),D(p),D(p,o,"Generator"),D(p,n,(function(){return this})),D(p,"toString",(function(){return"[object Generator]"})),(F=function(){return{w:u,m:f}})()}function D(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}D=function(t,e,r,n){if(e)o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r;else{function u(e,r){D(t,e,(function(t){return this._invoke(e,r,t)}))}u("next",0),u("throw",1),u("return",2)}},D(t,e,r,n)}function M(t,e,r,n,o,u,c){try{var i=t[u](c),a=i.value}catch(t){return void r(t)}i.done?e(a):Promise.resolve(a).then(n,o)}function N(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var u=t.apply(e,r);function c(t){M(u,n,o,c,i,"next",t)}function i(t){M(u,n,o,c,i,"throw",t)}c(void 0)}))}}var U="";m.forEach((function(t){t.addEventListener("mousedown",(function(r){return function(t,r){t.target.classList.contains("popup")&&e(r)}(r,t)})),t.querySelector(".popup__close").addEventListener("click",(function(){return e(t)}))}));var H=document.querySelector(".profile__title"),V=document.querySelector(".profile__description"),$=document.querySelector(".profile__image"),z=document.querySelector(".profile__image-cover"),J=document.querySelector(".profile__edit-button"),K=b.querySelector('.popup__form[name="edit-avatar"]'),Q=K.querySelector(".popup__input_type_url");z.addEventListener("click",(function(){K.reset(),L(K,C),t(b)})),K.addEventListener("submit",function(){var t=N(F().m((function t(r){var n,o,u,c;return F().w((function(t){for(;;)switch(t.n){case 0:return r.preventDefault(),n=b.querySelector(C.submitButtonSelector),t.p=1,G(!0,n),t.n=2,p(Q.value);case 2:o=t.v,u=o.avatar,$.style.backgroundImage="url('".concat(u,"')"),e(b),t.n=4;break;case 3:t.p=3,c=t.v,console.error(c);case 4:return t.p=4,G(!1,n),t.f(4);case 5:return t.a(2)}}),t,null,[[1,3,4,5]])})));return function(e){return t.apply(this,arguments)}}());var R=_.querySelector('.popup__form[name="edit-profile"]'),W=R.querySelector(".popup__input_type_name"),X=R.querySelector(".popup__input_type_description");J.addEventListener("click",(function(){L(R,C),W.value=H.textContent,X.value=V.textContent,t(_)})),R.addEventListener("submit",function(){var t=N(F().m((function t(r){var n,o,u,c,i;return F().w((function(t){for(;;)switch(t.n){case 0:return r.preventDefault(),n=_.querySelector(C.submitButtonSelector),t.p=1,G(!0,n),t.n=2,a(W.value,X.value);case 2:o=t.v,u=o.name,c=o.about,H.textContent=u,V.textContent=c,e(_),t.n=4;break;case 3:t.p=3,i=t.v,console.error(i);case 4:return t.p=4,G(!1,n),t.f(4);case 5:return t.a(2)}}),t,null,[[1,3,4,5]])})));return function(e){return t.apply(this,arguments)}}());var Y=document.querySelector(".profile__add-button"),Z=h.querySelector(".popup__form"),tt=Z.querySelector(".popup__input_type_card-name"),et=Z.querySelector(".popup__input_type_url");Y.addEventListener("click",(function(){Z.reset(),L(Z,C),t(h)})),Z.addEventListener("submit",function(){var t=N(F().m((function t(r){var n,o,u;return F().w((function(t){for(;;)switch(t.n){case 0:return r.preventDefault(),n=h.querySelector(C.submitButtonSelector),t.p=1,G(!0,n),t.n=2,c=tt.value,a=et.value,i("/cards",{method:"POST",data:{name:c,link:a}});case 2:o=t.v,nt(d(o,U,y,v,(function(){return rt(o.link,o.name)}))),e(h),t.n=4;break;case 3:t.p=3,u=t.v,console.error(u);case 4:return t.p=4,G(!1,n),t.f(4);case 5:return t.a(2)}var c,a}),t,null,[[1,3,4,5]])})));return function(e){return t.apply(this,arguments)}}());var rt=function(e,r){g.src=e,g.alt=r,w.textContent=r,t(S)},nt=function(t){return k.prepend(t)};N(F().m((function t(){var e,r,n,o,u;return F().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,Promise.all([i("/users/me"),i("/cards")]);case 1:e=t.v,r=B(e,2),n=r[0],o=r[1],U=n._id,H.textContent=n.name,V.textContent=n.about,$.style.backgroundImage="url('".concat(n.avatar,"')"),o.forEach((function(t){return e=d(t,U,y,v,(function(){return rt(t.link,t.name)})),k.append(e);var e})),t.n=3;break;case 2:t.p=2,u=t.v,console.error(u);case 3:return t.a(2)}}),t,null,[[0,2]])})))(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;document.querySelectorAll(t.formSelector).forEach((function(e){return j(e,t)}))}(C)}},t=>{var e;e=503,t(t.s=e)}]);
//# sourceMappingURL=main.c731d9e2.js.map